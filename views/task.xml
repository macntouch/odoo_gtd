<openerp><data>

<menuitem id='task_top_menu' name='Tasks' parent='gtd_top_menu' sequence='10'/>

<record id='task_project_action' model='ir.actions.act_window'>
	<field name='name'>Tasks</field>
	<field name='res_model'>gtd.task</field>
	<field name='view_mode'>tree,form</field>
	<field name='context'>{'default_project': active_id}</field>
	<field name='domain'>[('project','=', active_id)]</field>
</record>

<record id='task_action1' model='ir.actions.act_window'>
	<field name='name'>Project Actions</field>
	<field name='res_model'>gtd.task</field>
	<field name='view_mode'>tree,form</field>
    <field name="domain">[('project.state','=','Active')]</field>
</record>

<menuitem id='task_menu' name='All' parent='task_top_menu' sequence='5' action="task_action1"/>


<record id='task_today_action' model='ir.actions.act_window'>
	<field name='name'>Today Tasks </field>
	<field name='res_model'>gtd.task</field>
	<field name='view_mode'>tree,form</field>
	<field name='domain'>[('state','=','Today')]</field>
</record>
<menuitem id='task_today_menu' name='Today' parent='task_top_menu'
          sequence='5' action='task_today_action'/>

<record id='task_tomorrow_action' model='ir.actions.act_window'>
	<field name='name'>Tomorrow Tasks </field>
	<field name='res_model'>gtd.task</field>
	<field name='view_mode'>tree,form</field>
	<field name='domain'>[('state','=','Tomorrow')]</field>
</record>
<menuitem id='task_tomorrow_menu' name='Tomorrow' parent='task_top_menu'
          sequence='9' action='task_tomorrow_action'/>

<record id='task_next_action' model='ir.actions.act_window'>
	<field name='name'>Next Tasks </field>
	<field name='res_model'>gtd.task</field>
	<field name='view_mode'>tree,form</field>
	<field name='domain'>[('state','=','Next')]</field>
</record>
<menuitem id='task_next_menu' name='Next' parent='task_top_menu'
          sequence='10' action='task_next_action'/>

<record id='task_waiting_action' model='ir.actions.act_window'>
	<field name='name'>Waiting Tasks </field>
	<field name='res_model'>gtd.task</field>
	<field name='view_mode'>tree,form</field>
	<field name='domain'>[('state','=','Waiting')]</field>
</record>
<menuitem id='task_waiting_menu' name='Waiting' parent='task_top_menu'
          sequence='15' action='task_waiting_action'/>

<record id='task_scheduled_action' model='ir.actions.act_window'>
	<field name='name'>Scheduled Tasks </field>
	<field name='res_model'>gtd.task</field>
	<field name='view_mode'>tree,form</field>
	<field name='domain'>[('state','=','Scheduled')]</field>
</record>
<menuitem id='task_scheduled_menu' name='Scheduled' parent='task_top_menu'
          sequence='20' action='task_scheduled_action'/>
    
<record id='task_someday_action' model='ir.actions.act_window'>
	<field name='name'>Someday Tasks </field>
	<field name='res_model'>gtd.task</field>
	<field name='view_mode'>tree,form</field>
	<field name='domain'>[('state','=','Someday')]</field>
</record>
<menuitem id='task_someday_menu' name='Someday' parent='task_top_menu'
          sequence='15' action='task_someday_action'/>
    
<record id='task_tree_view' model='ir.ui.view'>
	<field name='name'>GTD Inbox Tree</field>
	<field name='model'>gtd.task</field>
	<field name='arch' type='xml'>
		<tree>
			<field name='sequence' invisible='1'/>
			<field name='name'/>
            <field name='area'/>
            <field name="state"/>
            <field name="project"/>
            <field name="state_change_count"/>
		</tree>
	</field>
</record>

<record id='task_form_view' model='ir.ui.view'>
	<field name='name'>GTD Inbox Form</field>
	<field name='model'>gtd.task</field>
	<field name='arch' type='xml'>
		<form string='Task'>
			<header>
				<field name='state' widget='statusbar' clickable='True'/>
			</header>
			<sheet string='Task'>
				<div class='oe_title'>
					<label for='name' class='oe_edit_only'/>
					<h1><field name='name'/></h1>
				</div>
				<group>
					<group string='Task info'>
                        <field name="state"/>
						<field name='note'/>
                        <field name="state_change_count" readonly="1"/>
					</group>
					<group string='Task settings'>
						<field name='project'/>
						<field name='area' invisible="1"/>
					</group>
				</group>
			</sheet>
		</form>
	</field>
</record>

<record id="task_search" model="ir.ui.view">
	<field name="name">gtd.task.search</field>
	<field name="model">gtd.task</field>
	<field name="arch" type="xml">
		<search>
			<field name="name"/>
			<field name="project"/>
            <field name="area"/>
            <field name="state"/>
            <field name="project_state"/>
			<group string="Filter by">
                <filter string="Today" domain="[('state','=','Today')]"/>
                <filter string="Tomorrow" domain="[('state','=','Tomorrow')]"/>
				<filter string="Next" domain="[('state','=','Next')]"/>
				<filter string="Waiting" domain="[('state','=','Waiting')]"/>
                <filter string="Someday" domain="[('state','=','Someday')]"/>
                <filter string="Scheduled" domain="[('state','=','Scheduled')]"/>
			</group>
			<group string="Project State">
                <filter string="Current" domain="[('project_state','=','Current')]"/>
                <filter string="Plan" domain="[('project_state','=','Plan')]"/>
				<filter string="Delay" domain="[('project_state','=','Delay')]"/>
			</group>
			<group string="Group By">
				<filter string="State" name="by_state" domain="[]"
						context="{'group_by': 'state'}"/>
                <filter string="Project State" name="by_project_state" domain="[]"
						context="{'group_by': 'project_state'}"/>
			</group>
		</search>
	</field>
</record>


</data></openerp>